@page "/pagos/resultado"
@namespace PasarelaPago.Client.Pages.ResultadoTransaccion
@using MudBlazor

<MudContainer MaxWidth="MaxWidth.Medium" Class="mx-auto mt-6">

    @if (Loading)
    {
        <MudSkeleton Height="60px" Class="mb-4" />
        <MudSkeleton Height="220px" />
    }
    else
    {
        <!-- Banda de estado -->
        <div class="banner @BannerCss">
            <MudIcon Icon="@BannerIcon" Size="Size.Large" Class="mr-2" />
            <MudText Typo="Typo.h5" Class="m-0">@BannerText</MudText>
        </div>

        <!-- BLOQUE CLIENTE -->
        <MudCard Class="mt-3 shadow-sm">
            <MudCardContent Class="p-4">
                <MudGrid Spacing="2">
                    <!-- Cliente -->
                    @if (!string.IsNullOrWhiteSpace(Result.DisplayCustomer))
                    {
                        <MudItem xs="12" sm="6">
                            <MudText Typo="Typo.subtitle1" Class="font-bold">Cliente</MudText>
                            <MudText>@Result.DisplayCustomer</MudText>
                        </MudItem>
                    }

                    <!-- País -->
                    @if (!string.IsNullOrWhiteSpace(Result.Country))
                    {
                        <MudItem xs="12" sm="6">
                            <MudText Typo="Typo.subtitle1" Class="font-bold">País</MudText>
                            <MudText>@Result.Country</MudText>
                        </MudItem>
                    }

                    <!-- Cédula -->
                    @if (!string.IsNullOrWhiteSpace(Result.IdNumber))
                    {
                        <MudItem xs="12" sm="6">
                            <MudText Typo="Typo.subtitle1" Class="font-bold">Cédula</MudText>
                            <MudText>@Result.IdNumber</MudText>
                        </MudItem>
                    }

                    <!-- Correo -->
                    @if (!string.IsNullOrWhiteSpace(Result.Email))
                    {
                        <MudItem xs="12" sm="6">
                            <MudText Typo="Typo.subtitle1" Class="font-bold">Correo</MudText>
                            <MudText>@Result.Email</MudText>
                        </MudItem>
                    }
                </MudGrid>
            </MudCardContent>
        </MudCard>

        <!-- BLOQUE TRANSACCIÓN -->
        <MudCard Class="mt-3 shadow-sm">
            <MudCardContent Class="p-4">
                <MudGrid Spacing="2">
                    <MudItem xs="12" sm="6">
                        <MudText Typo="Typo.subtitle1" Class="font-bold">Descripción</MudText>
                        <MudText>@(Result.Description ?? "-")</MudText>
                    </MudItem>

                    <MudItem xs="12" sm="6">
                        <MudText Typo="Typo.subtitle1" Class="font-bold">Autorización</MudText>
                        <MudText>@(Result.Auth ?? "-")</MudText>
                    </MudItem>

                    <MudItem xs="12" sm="6">
                        <MudText Typo="Typo.subtitle1" Class="font-bold">Marca</MudText>
                        <MudText>@FormatBrand(Result.Brand, Result.Last4)</MudText>
                    </MudItem>

                    <MudItem xs="12" sm="6">
                        <MudText Typo="Typo.subtitle1" Class="font-bold">Orden</MudText>
                        <MudText>@(Result.Order ?? "-")</MudText>
                    </MudItem>

                    @if (!string.IsNullOrWhiteSpace(Result.TilopayTx))
                    {
                        <MudItem xs="12" sm="6">
                            <MudText Typo="Typo.subtitle1" Class="font-bold">Id Tilopay</MudText>
                            <MudText>@Result.TilopayTx</MudText>
                        </MudItem>
                    }
                </MudGrid>
            </MudCardContent>
        </MudCard>

        <!-- BLOQUE MONTO -->
        @if (!string.IsNullOrWhiteSpace(Result.AmountLabel))
        {
            <div class="amount-center">
                <MudText Typo="Typo.overline">MONTO CANCELADO</MudText>
                <MudText Typo="Typo.h4" Class="mb-0">@Result.AmountLabel</MudText>
                @if (!string.IsNullOrWhiteSpace(Result.Currency))
                {
                    <MudText Typo="Typo.caption" Class="mt-1">@Result.Currency</MudText>
                }
            </div>
        }

        <!-- Botón centrado -->
        <div class="d-flex justify-center mt-4 mb-4">
            <MudButton Variant="Variant.Filled" Color="Color.Info" OnClick="VolverInicio">
                VOLVER AL INICIO
            </MudButton>
        </div>
    }
</MudContainer>


<style>
    .banner {
        display: flex;
        align-items: center;
        border-radius: 10px;
        padding: 14px 16px;
        color: #fff;
    }

    .banner-success {
        background: #08c25e;
    }

    .banner-warning {
        background: #f59e0b;
    }

    .banner-error {
        background: #ef4444;
    }

    .font-bold {
        font-weight: 700;
    }

    .amount-center {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 10px;
    }
</style>
